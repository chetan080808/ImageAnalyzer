<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>AI Image Analyzer - Demo</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { font-family: Arial, sans-serif; max-width:700px; margin:40px auto; }
    h1 { color:#111; }
    .card { padding:18px; border:1px solid #eee; border-radius:8px; }
    #result { white-space: pre-wrap; background:#f7f7f7; padding:12px; border-radius:6px; margin-top:12px; }
    input[type=file] { margin-top:12px; }
    button { margin-top:8px; padding:8px 14px; }
  </style>
</head>
<body>
  <h1>AI Image Analyzer (Demo)</h1>
  <div class="card">
    <p>Upload an image and click <strong>Analyze</strong>. This will send the image to the API Gateway which triggers a Lambda that calls Amazon Rekognition.</p>

    <input id="fileInput" type="file" accept="image/*"><br>
    <button id="analyzeBtn">Analyze</button>
    <div id="status"></div>
    <pre id="result"></pre>
  </div>

<script>
const apiUrl = "REPLACE_WITH_YOUR_API_GATEWAY_URL"; // <-- replace this before uploading to S3

document.getElementById('analyzeBtn').addEventListener('click', async () => {
  const f = document.getElementById('fileInput').files[0];
  if (!f) return alert('Please choose an image file first.');
  document.getElementById('status').innerText = 'Reading file...';
  const reader = new FileReader();
  reader.onload = async function() {
    const base64 = reader.result.split(',')[1];
    document.getElementById('status').innerText = 'Calling API...';
    try {
      const res = await fetch(apiUrl, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ image: base64 })
      });
      const data = await res.json();
      document.getElementById('status').innerText = 'Result:';
      document.getElementById('result').innerText = JSON.stringify(data, null, 2);
    } catch (err) {
      document.getElementById('status').innerText = 'Error: ' + err.message;
      console.error(err);
    }
  };
  reader.readAsDataURL(f);
});
</script>
</body>
</html>
